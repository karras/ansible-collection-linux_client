---

- name: Install firewalld packages
  ansible.builtin.package:
    name: '{{ firewalld_packages }}'
    state: present

- name: Configure default zone behavior
  ansible.builtin.lineinfile:
    path: /etc/firewalld/firewalld.conf
    regexp: '^DefaultZone='
    line: 'DefaultZone={{ firewalld_default_zone }}'
  notify: Restart firewalld

# Service related tasks do not work well in molecule idempotence tests
- name: Enable firewalld
  ansible.builtin.service:
    name: firewalld
    enabled: yes
    state: started
  tags:
    - molecule-idempotence-notest
